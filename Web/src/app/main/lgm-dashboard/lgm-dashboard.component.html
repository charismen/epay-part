<div [@routerTransition] id="LGMDashboard">
    <div class="kt-content kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor" id="kt_content">
        <div class="kt-subheader kt-grid__item" id="kt_subheader">
            <div [class]="containerClass">
                <div class="kt-subheader__main">
                    <h3 class="kt-subheader__title">
                        <span>{{"Dashboard" | localize}}</span>
                    </h3>
                    <div class="kt-subheader__breadcrumbs">
                        <a href="app/workorder/workorder" class="kt-subheader__breadcrumbs-home"><i
                                class="flaticon2-shelter"></i></a>
                        <span class="kt-subheader__breadcrumbs-separator"></span>
                        <a href="" class="kt-subheader__breadcrumbs-link">
                            {{"Dashboard" | localize}}
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div [class]="containerClass">
            <div class="row">
                <div class="col-md-3 col-lg-3">
                    <div class="kt-portlet kt-portlet--head--noborder kt-portlet--height-fluid"
                        style="height: calc(100% - 20px);">
                        <div class="kt-portlet__head ">
                            <div class="kt-portlet__head-label">
                                <h3 class="kt-portlet__head-title">
                                    {{"QuickPayment" | localize}}
                                </h3>
                            </div>
                            <div class="kt-portlet__head-toolbar">
                                <div class="dropdown dropdown-inline">
                                    <button type="button" class="btn btn-clean btn-sm btn-icon btn-icon-lg"
                                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <i class="flaticon-more-1"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="kt-portlet__body" id="dashboard-data">
                            <div class="kt-widget14__header"
                                style="text-align: right;padding: 0.9em 1.3em;min-height:130px; float: right; max-width: 500px;">
                                <span
                                    class="kt-widget12__desc kt-font-bold">{{"TotalAmountDue" | localize | uppercase}}</span>
                                <div class="kt-widget14__title">
                                    <span class="currencyLocal">{{"CurrencyMyr" | localize}}</span>
                                    <span
                                        style="position: relative;font-size: 1.8em;font-weight: 600;color: #000;">{{totalAmountDue | number:'1.2-2'}}</span>
                                </div>

                                <div class="quickPaymentLink" style="padding-top: 1em;margin-bottom:2em;" *ngIf="!isGranted('Pages.Account.Payment.Offline')">
                                    <span class="quickPaymentText"
                                        style="color: #0e6196;font-weight: 600;font-size: 1.6em;cursor: pointer;"
                                        (click)="quickpay($event)">{{"QuickPay" | localize}}</span>
                                    <i>
                                        <svg xmlns="http://www.w3.org/2000/svg"
                                            xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px"
                                            y="0px" width="30.725px" height="30.725px" viewBox="0 0 30.725 30.725"
                                            style="enable-background:new 0 0 30.725 30.725;width: 12px;fill: #0e6196;margin-top: -7px;"
                                            xml:space="preserve">
                                            <g>
                                                <path
                                                    d="M13.832,30.725c-0.642,0-1.279-0.244-1.769-0.732c-0.978-0.977-0.978-2.56,0-3.535l11.095-11.093L12.064,4.268   c-0.978-0.979-0.978-2.562,0-3.535c0.978-0.978,2.56-0.978,3.535,0l14.628,14.631L15.6,29.992   C15.111,30.48,14.473,30.725,13.832,30.725z M4.766,29.992l14.628-14.628L4.766,0.733c-0.979-0.978-2.561-0.978-3.535,0   c-0.978,0.977-0.978,2.56,0,3.535l11.095,11.096L1.23,26.457c-0.978,0.978-0.978,2.561,0,3.535   c0.488,0.488,1.127,0.732,1.769,0.732C3.64,30.725,4.275,30.48,4.766,29.992z">
                                                </path>
                                            </g>
                                        </svg>
                                    </i>
                                </div>
                            </div>

                            <div class="kt-widget14__content"
                                style="padding-top: 1em; height: 100%; float: right; max-width: 500px;">
                                <div id="invoiceStat">
                                    <div class="dataChart">
                                        <div id="dataChartWrp">
                                            <div id="chartTotal">{{totalInvoice}}</div>
                                            <p-chart type="doughnut" [data]="chartData" [options]="chartOptions"
                                                widht="100%" height="100%" class="chartjs-render-monitor"></p-chart>
                                        </div>
                                        <div id="invoiceChartLegend" class="kt-widget14__legends">
                                            <div class="kt-widget14__legend">
                                                <span class="kt-widget14__bullet kt-bg-success"
                                                    style="background-color: #028d96 !important;"></span>
                                                <span style="padding-left: 5px;">
                                                    <div class="valueStat">{{"CurrencyMyr" | localize}} <span
                                                            class="kt-font-dark"
                                                            style="font-weight: 600;font-size: 1.2rem !important;color: #000;">{{totalCreditBill | number:'1.2-2'}}</span>
                                                    </div>
                                                    <span class="kt-widget14__stats"
                                                        style="text-align: end; font-size: 13px !important;">{{"CreditBill" | localize | uppercase}}</span><span
                                                        class="kt-padding-l-5"
                                                        style="font-weight: 600;font-size: 1.2rem !important;color: #000;">{{totalCreditBillCount | number:'1.0-0'}}</span>
                                                </span>
                                            </div>
                                            <div class="kt-widget14__legend">
                                                <span class="kt-widget14__bullet kt-bg-warning"
                                                    style="background-color: #00709e !important;"></span>
                                                <span style="padding-left: 5px;">
                                                    <div class="valueStat">{{"CurrencyMyr" | localize}} <span
                                                            class="kt-font-dark"
                                                            style="font-weight: 600;font-size: 1.2rem !important;color: #000;">{{totalProforma | number:'1.2-2'}}</span>
                                                    </div>
                                                    <span class="kt-widget14__stats"
                                                        style="text-align: end; font-size: 13px !important;">{{"Proforma" | localize | uppercase}}</span><span
                                                        class="kt-padding-l-5"
                                                        style="font-weight: 600;font-size: 1.2rem !important;color: #000;">{{totalProformaCount | number:'1.0-0'}}</span>
                                                </span>
                                            </div>
                                            <div class="kt-widget14__legend">
                                                <span class="kt-widget14__bullet kt-bg-brand"
                                                    style="background-color: #ef9c00 !important;"></span>
                                                <span style="padding-left: 8px;">
                                                    <div class="valueStat">{{"CurrencyMyr" | localize}} <span
                                                            class="kt-font-dark"
                                                            style="font-weight: 600;font-size: 1.2rem !important;color: #000;">{{totalOverdue | number:'1.2-2'}}</span>
                                                    </div>
                                                    <span class="kt-widget14__stats"
                                                        style="text-align: end; font-size: 13px !important;">{{"Overdue" | localize | uppercase}}</span><span
                                                        class="kt-padding-l-5"
                                                        style="font-weight: 600;font-size: 1.2rem !important;color: #000;">{{totalOverdueCount | number:'1.0-0'}}</span>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-lg-9">
                    <div class="kt-portlet kt-portlet--height-fluid">
                        <div class="kt-portlet__head">
                            <div class="kt-portlet__head-label">
                                <h3 class="kt-portlet__head-title">
                                    {{"PendingPayment" | localize}}
                                </h3>
                            </div>
                            <div class="kt-portlet__head-toolbar">
                                <a (click)='viewAllRecord()' class="btn btn-label-brand btn-sm  btn-bold">
                                    {{"ViewAllRecords" | localize}}
                                </a>
                            </div>
                        </div>
                        <div class="kt-portlet kt-portlet--height-fluid kt-portlet--mobile">
                            <div class="kt-portlet__body">
                                <!--Search Filter-->
                                <div class="row">
                                    <div class="col-sm-3 fullForm">
                                        <div class="" style="white-space: nowrap;">
                                            <div class="dateTime" style="white-space: nowrap;">
                                                <div class="labelMatrix">{{"InvoiceType" | localize}}</div>
                                                <div class="valueMatrix">
                                                    <ng-select id="typeSelect" style="margin: 0;padding: 5px 0px 0px;"
                                                        [(ngModel)]="selectedInvoiceType" [items]="typeCombo"
                                                        [closeOnSelect]="true" bindLabel="Remark"
                                                        placeholder="Select Invoice Type"
                                                        (change)="onInvoiceTypeChange($event)">
                                                    </ng-select>
                                                    <!-- <select id="typeSelect" style="margin: 0;padding: 5px 0px 0px;" #typeSelect (change)="onInvoiceTypeChange(typeSelect.value)" placeholder="Select Invoice Type">
                                                          <option value="">All Invoice</option>
                                                          <option value="CDT">Credit Bill</option>
                                                          <option value="PRF">Proforma</option>
                                                      </select> -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 fullForm" *ngIf="isGranted('Pages.Account.Payment.Offline')">
                                        <div class="" style="white-space: nowrap;">
                                            <div class="labelMatrix">{{"Customer" | localize}}</div>
                                            <div class="valueMatrix">
                                                <ng-select id="customerSelect" style="margin: 0;padding: 5px 0px 0px;"
                                                    [(ngModel)]="selectedCustomer" [items]="customerCombo"
                                                    [closeOnSelect]="true" bindLabel="Remark2"
                                                    placeholder="Select Customer" (change)="onCustomerChange($event)">
                                                </ng-select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-5 fullForm">
                                        <div class="" style="white-space: nowrap;">
                                            <div class="labelMatrix" style="margin-bottom: 5px;">
                                                {{"BillingDate" | localize}}</div>
                                            <div id="billingDateWrp" style="display: flex;" class="valueMatrix">
                                                <input name="DateFromPicker" type="text" placeholder="From"
                                                    style="display: inline-block;width: 130px;" #DateFromPicker
                                                    name="DateFromPicker" [(ngModel)]="dateFrom" class="form-control"
                                                    bsDatepicker datePickerMomentModifier
                                                    (dateChange)="checkDateFrom($event)"
                                                    (change)="checkDateFrom($event)" />
                                                <div class="inlineBlock" id="dateSeperator">
                                                    <span>...</span>
                                                </div>
                                                <input name="DateToPicker" type="text" placeholder="To"
                                                    style="display: inline-block;width: 130px;" #DateToPicker
                                                    name="DateToPicker" class="form-control" [(ngModel)]="dateTo"
                                                    bsDatepicker datePickerMomentModifier
                                                    (dateChange)="checkDateTo($event)" (change)="checkDateTo($event)" />
                                            </div>
                                        </div>
                                        <div style="color:#ff0000">
                                            <span>{{errorDate}}</span>
                                        </div>
                                    </div>
                                    <div class="col-sm-3 kt-margin-t-10 button-search" style="display: flex; align-items: flex-end;">
                                        <div class="labelMatrix">&nbsp;</div>
                                        <div class="ng-tns-c24-4">
                                            <button class="btn btn-primary btn-md input-group-append"
                                                (click)="searchFilter()"><i class="fa fa-search"></i>{{"Search" | localize}}</button>
                                        </div>
                                    </div>
                                    <!-- <div  c l ass="col-sm-3 fullForm" style="margin: 23px 0 10px;">
                                            <button class="btn btn-primary btn-brand--icon searchButton" >
                                                <span><span>{{"Search" | localize}}</span></span>
                                            </button>
                                            <button class="btn btn-primary btn-wide" type="button" id="kt_search" (click)="searchFilter($event)">
                                                {{"Search" | localize}}
                                            </button>
                                    </div> -->
                                </div>
                                <!--Search Filter-->
                                <!-- <div class="kt-portlet__head">
                                    <div class="kt-portlet__head-caption">
                                        <div class="kt-portlet__head-title">
                                            <h3 class="kt-portlet__head-text lgmDashboardHead">
                                                {{"PendingPayment" | localize}}
                                            </h3>
                                        </div>
                                        <div class="kt-portlet__head-toolbar">
                                            <a (click)='viewAllRecord()' href="#" class="btn btn-label-brand btn-sm  btn-bold" style="cursor: pointer;">
                                            {{"ViewAllRecords" | localize}}
                                            </a>
                                        </div>
                                    </div>
                                    <div class="kt-subheader__toolbar" style="margin-top: -0.5rem">
                                        <div class="kt-subheader__wrapper">
                                            <button type="button" class="btn btn-label-success btn-sm btn-bold" (click)='viewAllRecord()'>{{"ViewAllRecords" | localize}}</button>
                                        </div>
                                    </div>
                                </div> -->
                                <div class="kt-margin-t-20 tableStylePlain">
                                    <base-list #baseList [(gridUrl)]="gridUrl" [enableFilter]="false"
                                        (onSelectedChange)="clickPay($event)"></base-list>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>